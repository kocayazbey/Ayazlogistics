syntax = "proto3";

package logistics;

service VehicleService {
  rpc GetVehicle (VehicleRequest) returns (Vehicle);
  rpc ListVehicles (ListVehiclesRequest) returns (VehicleList);
  rpc CreateVehicle (CreateVehicleRequest) returns (Vehicle);
  rpc UpdateVehicleLocation (LocationUpdate) returns (UpdateResponse);
}

service WarehouseService {
  rpc GetInventory (InventoryRequest) returns (Inventory);
  rpc UpdateStock (StockUpdate) returns (UpdateResponse);
  rpc CreatePickingOrder (PickingOrderRequest) returns (PickingOrder);
}

message VehicleRequest {
  string id = 1;
}

message ListVehiclesRequest {
  string status = 1;
  int32 page = 2;
  int32 limit = 3;
}

message Vehicle {
  string id = 1;
  string plate_number = 2;
  string type = 3;
  double capacity = 4;
  string status = 5;
  Location current_location = 6;
}

message VehicleList {
  repeated Vehicle vehicles = 1;
  int32 total = 2;
}

message CreateVehicleRequest {
  string plate_number = 1;
  string type = 2;
  double capacity = 3;
}

message LocationUpdate {
  string vehicle_id = 1;
  double latitude = 2;
  double longitude = 3;
  double speed = 4;
  int64 timestamp = 5;
}

message Location {
  double latitude = 1;
  double longitude = 2;
}

message UpdateResponse {
  bool success = 1;
  string message = 2;
}

message InventoryRequest {
  string warehouse_id = 1;
  string sku = 2;
}

message Inventory {
  string sku = 1;
  double quantity = 2;
  repeated InventoryLocation locations = 3;
}

message InventoryLocation {
  string location_id = 1;
  double quantity = 2;
}

message StockUpdate {
  string warehouse_id = 1;
  string sku = 2;
  double quantity = 3;
  string operation = 4;
}

message PickingOrderRequest {
  string warehouse_id = 1;
  repeated PickingLine lines = 2;
}

message PickingLine {
  string sku = 1;
  double quantity = 2;
}

message PickingOrder {
  string id = 1;
  string order_number = 2;
  string status = 3;
  repeated PickingLine lines = 4;
}

